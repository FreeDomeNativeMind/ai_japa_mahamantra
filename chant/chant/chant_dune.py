#!/usr/bin/env python3
"""
Chant Dune - —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ö–∞–º–∞–Ω—Ç—Ä—ã –Ω–∞ —è–∑—ã–∫–∞—Ö –≤—Å–µ–ª–µ–Ω–Ω–æ–π –î—é–Ω—ã
"""

import time
import threading
from chant_mantra import ChantMantra

def dune_language_cycle(chanter, cycle_interval=180):
    """
    –¶–∏–∫–ª–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —è–∑—ã–∫–∏ –≤ —Å—Ç–∏–ª–µ –≤—Å–µ–ª–µ–Ω–Ω–æ–π –î—é–Ω—ã
    
    Args:
        chanter: –≠–∫–∑–µ–º–ø–ª—è—Ä ChantMantra
        cycle_interval: –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    """
    dune_languages = ["harkonnen", "atreides", "freemen", "russian", "thai"]
    current_index = 0
    
    print("üèúÔ∏è –î—é–Ω–∞: –ü–µ—Å–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ —Ç–µ—á–µ—Ç –∫–∞–∫ –ø–µ—Å–æ–∫ –≤—Ä–µ–º–µ–Ω–∏...")
    
    while True:
        time.sleep(cycle_interval)
        
        # –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —è–∑—ã–∫
        current_index = (current_index + 1) % len(dune_languages)
        new_language = dune_languages[current_index]
        
        # –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
        themes = {
            "harkonnen": "üï∑Ô∏è –ì–ª–∞–π—Ç: '–°—Ç—Ä–∞—Ö - —ç—Ç–æ —É–±–∏–π—Ü–∞ —Ä–∞–∑—É–º–∞' - –ø–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —è–∑—ã–∫ –•–∞—Ä–∫–æ–Ω–µ–Ω–æ–≤",
            "atreides": "ü¶Ö –ê—Ç—Ä–µ–π–¥–µ—Å: '–°–∏–ª–∞ –∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –≤–µ—Ä—ã' - –ø–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —è–∑—ã–∫ –ê—Ç—Ä–µ–π–¥–µ—Å–æ–≤",
            "freemen": "üèúÔ∏è –§—Ä–∏–º–µ–Ω: '–ü–µ—Å–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ —Ç–µ—á–µ—Ç –∫–∞–∫ –ø–µ—Å–æ–∫ –≤—Ä–µ–º–µ–Ω–∏' - –ø–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —è–∑—ã–∫ –§—Ä–∏–º–µ–Ω–æ–≤",
            "russian": "‚ùÑÔ∏è –ê—Ä—Ä–∞–∫–∏—Å: '–í–æ–¥–∞ –∂–∏–∑–Ω–∏' - –ø–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫",
            "thai": "üåä –ö–∞–ª–∞–¥–∞–Ω: '–í–æ–¥–∞ –ø–æ–≤—Å—é–¥—É' - –ø–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —Ç–∞–π—Å–∫–∏–π —è–∑—ã–∫"
        }
        
        print(f"\n{themes.get(new_language, f'üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —è–∑—ã–∫: {new_language}')}")
        chanter.change_language(new_language)

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –î—é–Ω—ã"""
    print("üèúÔ∏è Chant Dune - –ú–∞—Ö–∞–º–∞–Ω—Ç—Ä–∞ –≤ —Å—Ç–∏–ª–µ –≤—Å–µ–ª–µ–Ω–Ω–æ–π –î—é–Ω—ã")
    print("=" * 60)
    print("üåç –î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏:")
    print("   üï∑Ô∏è  harkonnen - –Ø–∑—ã–∫ –•–∞—Ä–∫–æ–Ω–µ–Ω–æ–≤ (–ì–ª–∞–π—Ç)")
    print("   ü¶Ö  atreides  - –Ø–∑—ã–∫ –ê—Ç—Ä–µ–π–¥–µ—Å–æ–≤ (–í–µ—Ä–Ω–æ—Å—Ç—å)")
    print("   üèúÔ∏è  freemen   - –Ø–∑—ã–∫ –§—Ä–∏–º–µ–Ω–æ–≤ (–ü–µ—Å–æ–∫ –≤—Ä–µ–º–µ–Ω–∏)")
    print("   ‚ùÑÔ∏è  russian   - –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ (–ê—Ä—Ä–∞–∫–∏—Å)")
    print("   üåä  thai      - –¢–∞–π—Å–∫–∏–π —è–∑—ã–∫ (–ö–∞–ª–∞–¥–∞–Ω)")
    print("=" * 60)
    
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä —Å —è–∑—ã–∫–æ–º –•–∞—Ä–∫–æ–Ω–µ–Ω–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    chanter = ChantMantra(language="harkonnen")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏
    if not chanter.check_model_availability():
        print("‚ùå –ú–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Ollama.")
        return
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫
    print(f"üåç –¢–µ–∫—É—â–∏–π —è–∑—ã–∫: {chanter.language}")
    print(f"üïâÔ∏è –¢–µ–∫—É—â–∞—è –º–∞—Ö–∞–º–∞–Ω—Ç—Ä–∞: {chanter.mantra}")
    print()
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    # –ö–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã (180 —Å–µ–∫—É–Ω–¥) —è–∑—ã–∫ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è
    dune_thread = threading.Thread(
        target=dune_language_cycle,
        args=(chanter, 180),
        daemon=True
    )
    dune_thread.start()
    
    print("üèúÔ∏è –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ –∑–∞–ø—É—â–µ–Ω–æ (–∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã)")
    print("üí° –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C")
    print("üåç –¶–∏–∫–ª: –•–∞—Ä–∫–æ–Ω–µ–Ω—ã ‚Üí –ê—Ç—Ä–µ–π–¥–µ—Å—ã ‚Üí –§—Ä–∏–º–µ–Ω—ã ‚Üí –†—É—Å—Å–∫–∏–π ‚Üí –¢–∞–π—Å–∫–∏–π")
    print()
    
    try:
        # –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –º–∞—Ö–∞–º–∞–Ω—Ç—Ä—ã
        chanter.continuous_chant(interval=60)
    except KeyboardInterrupt:
        print("\nüõë –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –æ—Å—Ç–∞–Ω–æ–≤–∫–∏. –ó–∞–≤–µ—Ä—à–∞—é —Ä–∞–±–æ—Ç—É...")
    finally:
        print("üèÅ –î—é–Ω–∞: –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ")

if __name__ == "__main__":
    main()
